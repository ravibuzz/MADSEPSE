<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Interativo: Fisiopatologia da Sepse</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        :root {
            --primary-bg: #f0f4f8;
            --secondary-bg: #ffffff;
            --primary-text: #2c3e50;
            --secondary-text: #5a6a7a;
            --accent-color: #3498db;
            --accent-hover: #2980b9;
            --correct-color: #2ecc71;
            --incorrect-color: #e74c3c;
            --border-radius: 8px;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--primary-bg);
            color: var(--primary-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .quiz-container {
            background-color: var(--secondary-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            overflow: hidden;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-header h1 {
            font-size: 2em;
            color: var(--primary-text);
            margin: 0;
        }

        #progress-container {
            text-align: center;
            font-size: 1.1em;
            color: var(--secondary-text);
            margin-bottom: 20px;
        }

        #question-text {
            font-size: 1.4em;
            font-weight: 500;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-btn {
            background-color: var(--secondary-bg);
            border: 2px solid #bdc3c7;
            border-radius: var(--border-radius);
            padding: 15px;
            font-size: 1em;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--primary-text);
        }

        .option-btn:hover:not([disabled]) {
            background-color: #ecf0f1;
            border-color: var(--accent-color);
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
        }

        .option-btn.correct {
            background-color: var(--correct-color);
            border-color: var(--correct-color);
            color: white;
            font-weight: bold;
        }

        .option-btn.incorrect {
            background-color: var(--incorrect-color);
            border-color: var(--incorrect-color);
            color: white;
            font-weight: bold;
        }
        
        #hint-container {
            margin-top: 20px;
            padding: 10px;
            background-color: #ecf0f1;
            border-left: 4px solid var(--accent-color);
            color: var(--secondary-text);
            font-style: italic;
        }

        #feedback-container {
            margin-top: 20px;
            padding: 15px;
            border-radius: var(--border-radius);
            font-size: 0.95em;
            line-height: 1.5;
            display: none; /* Oculto por padrão */
        }
        
        #feedback-container.correct {
            background-color: #eafaf1;
            border: 1px solid var(--correct-color);
            color: #1e8449;
        }

        #feedback-container.incorrect {
            background-color: #fdedec;
            border: 1px solid var(--incorrect-color);
            color: #b03a2e;
        }


        .navigation {
            display: flex;
            justify-content: flex-end;
            margin-top: 30px;
        }

        #next-btn, #restart-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: var(--border-radius);
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #next-btn:hover, #restart-btn:hover {
            background-color: var(--accent-hover);
        }

        #next-btn {
            display: none; /* Oculto por padrão */
        }
        
        #results-container {
            text-align: center;
        }

        #results-container h2 {
            font-size: 2.2em;
        }

        #score-text {
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        /* Estado inicial oculto */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <div id="quiz-content">
            <div class="quiz-header">
                <h1>Quiz de Fisiopatologia</h1>
            </div>
            <div id="progress-container">Questão <span id="question-number">1</span> de <span id="total-questions">15</span></div>
            <hr>
            <div id="question-text">Carregando pergunta...</div>
            <div class="options-container" id="options-container">
                <!-- Opções serão inseridas aqui via JavaScript -->
            </div>
            <div id="hint-container" class="hidden">
                <strong>Dica:</strong> <span id="hint-text"></span>
            </div>
            <div id="feedback-container">
                <!-- Feedback/Justificativa será inserido aqui -->
            </div>
            <div class="navigation">
                <button id="next-btn">Próxima Questão</button>
            </div>
        </div>
        
        <div id="results-container" class="hidden">
            <h2>Quiz Finalizado!</h2>
            <p id="score-text">Sua pontuação final é...</p>
            <p id="feedback-message">Ótimo trabalho!</p>
            <button id="restart-btn">Refazer Quiz</button>
        </div>
    </div>

    <script>
        // --- BANCO DE DADOS COMPLETO DAS QUESTÕES ---
        const quizData = [
            {
                question: "Um paciente recebe uma transfusão sanguínea ABO incompatível e rapidamente desenvolve febre, hipotensão e hemólise intravascular. Qual tipo de hipersensibilidade está primariamente envolvido nesta reação?",
                options: [
                    { text: "Hipersensibilidade tipo I, mediada por IgE.", rationale: "A hipersensibilidade tipo I está associada a reações alérgicas como asma e anafilaxia, mediadas por IgE, e não a reações transfusionais por incompatibilidade ABO." },
                    { text: "Hipersensibilidade tipo II, mediada por anticorpos IgM e IgG.", rationale: "Esta é a resposta correta. As reações transfusionais por incompatibilidade ABO são exemplos clássicos de hipersensibilidade tipo II, na qual anticorpos pré-formados (IgM e IgG) se ligam a antígenos na superfície das células (hemácias), levando à sua destruição.", isCorrect: true },
                    { text: "Hipersensibilidade tipo III, mediada por imunocomplexos.", rationale: "A hipersensibilidade tipo III envolve a deposição de imunocomplexos (antígeno-anticorpo) em tecidos, causando inflamação crônica, como na artrite reumatoide, e não uma reação hiperaguda a células sanguíneas." },
                    { text: "Hipersensibilidade tipo IV, mediada por células T.", rationale: "A hipersensibilidade tipo IV é uma reação tardia mediada por células T, como na dermatite de contato, e não uma reação humoral imediata como a que ocorre em uma transfusão incompatível." }
                ],
                hint: "Pense no mecanismo que leva à destruição de células alvo por anticorpos."
            },
            {
                question: "Um paciente com lúpus eritematoso sistêmico apresenta glomerulonefrite. A biópsia renal revela deposição de complexos antígeno-anticorpo no glomérulo. Este achado é característico de qual tipo de hipersensibilidade?",
                options: [
                    { text: "Tipo I", rationale: "A hipersensibilidade do tipo I é caracterizada por reações alérgicas mediadas por IgE e não pela deposição de imunocomplexos." },
                    { text: "Tipo II", rationale: "A hipersensibilidade do tipo II envolve anticorpos que atacam diretamente as células, enquanto na glomerulonefrite lúpica, o dano é causado por complexos imunes depositados." },
                    { text: "Tipo III", rationale: "Correto. A glomerulonefrite no lúpus é um exemplo clássico de hipersensibilidade do tipo III, onde imunocomplexos circulantes se depositam nos tecidos, como os glomérulos, ativando o sistema complemento e causando inflamação e dano tecidual.", isCorrect: true },
                    { text: "Tipo IV", rationale: "A hipersensibilidade do tipo IV é uma reação mediada por células T, não por imunocomplexos." }
                ],
                hint: "Considere as doenças crônicas mencionadas no resumo que são causadas pela deposição de complexos formados por antígenos e anticorpos."
            },
            {
                question: "A formação de granulomas na tuberculose, com macrófagos ativados e células T circundantes, é uma manifestação de qual tipo de hipersensibilidade?",
                options: [
                    { text: "Hipersensibilidade tipo I", rationale: "A hipersensibilidade tipo I é uma reação imediata mediada por IgE, não uma resposta celular crônica que forma granulomas." },
                    { text: "Hipersensibilidade tipo II", rationale: "A hipersensibilidade tipo II envolve anticorpos contra antígenos de superfície celular." },
                    { text: "Hipersensibilidade tipo III", rationale: "A hipersensibilidade tipo III é mediada por imunocomplexos depositados nos tecidos." },
                    { text: "Hipersensibilidade tipo IV", rationale: "Correto. A formação de granulomas é uma característica da hipersensibilidade do tipo IV, uma resposta imune celular tardia, onde células T (especificamente Th1) ativam macrófagos para conter patógenos intracelulares.", isCorrect: true }
                ],
                hint: "Qual tipo de hipersensibilidade envolve uma resposta imune tardia e é mediada por células, não por anticorpos?"
            },
            {
                question: "Na esquistossomose, a deposição de ovos do parasita no fígado induz uma intensa reação inflamatória crônica com formação de granulomas. Qual subtipo de célula T auxiliar (Th) é predominante neste processo, levando à destruição e remodelamento tecidual?",
                options: [
                    { text: "Th1", rationale: "A resposta Th1 está mais associada à ativação de macrófagos para formar granulomas que isolam o patógeno, levando à fibrose, mas o remodelamento tecidual com eosinófilos é mais característico de outra resposta." },
                    { text: "Th2", rationale: "Correto. A resposta a helmintos como o Schistosoma mansoni é classicamente mediada por células Th2, que recrutam eosinófilos e estão envolvidas na destruição e remodelamento tecidual, como visto na fibrose periportal da esquistossomose.", isCorrect: true },
                    { text: "Th17", rationale: "A resposta Th17 está associada ao recrutamento de neutrófilos e é importante em doenças como a psoríase, não sendo a principal na formação de granulomas em resposta a ovos de helmintos." },
                    { text: "Treg", rationale: "As células T reguladoras (Treg) têm uma função de suprimir a resposta imune, enquanto a formação de granulomas é uma resposta imune ativa." }
                ],
                hint: "Considere qual tipo de resposta imune é classicamente associada a infecções por helmintos e ao recrutamento de eosinófilos."
            },
            {
                question: "Qual das seguintes condições NÃO é um exemplo de hipersensibilidade do tipo II?",
                options: [
                    { text: "Reação a uma transfusão sanguínea incompatível", rationale: "Este é um exemplo clássico de hipersensibilidade do tipo II, onde anticorpos atacam as hemácias do doador." },
                    { text: "Eritroblastose fetal (Doença Hemolítica do Recém-Nascido)", rationale: "Esta condição é causada por anticorpos IgG maternos que atravessam a placenta e destroem as hemácias fetais, sendo um exemplo de hipersensibilidade do tipo II." },
                    { text: "Artrite reumatoide", rationale: "Correto. A artrite reumatoide é primariamente uma doença de hipersensibilidade do tipo III, causada pela deposição de imunocomplexos nas articulações, embora possa ter componentes do tipo IV. Não é um exemplo puro do tipo II.", isCorrect: true },
                    { text: "Anemia hemolítica autoimune", rationale: "Nesta doença, o próprio corpo produz anticorpos contra suas hemácias, levando à sua destruição, o que a classifica como uma hipersensibilidade do tipo II." }
                ],
                hint: "Revise os exemplos dados para cada tipo de hipersensibilidade e identifique qual deles se baseia na deposição de imunocomplexos em vez de um ataque direto de anticorpos às células."
            },
            {
                question: "Na inflamação aguda, o TNF-alfa exerce efeitos protetores sistêmicos. Qual dos seguintes efeitos NÃO é considerado um efeito protetor sistêmico do TNF-alfa?",
                options: [
                    { text: "Indução de febre através da ação no hipotálamo.", rationale: "A indução de febre pelo hipotálamo é um efeito protetor sistêmico, pois a temperatura elevada pode inibir a proliferação de patógenos e otimizar a resposta imune." },
                    { text: "Estímulo ao fígado para produzir proteínas de fase aguda.", rationale: "A produção de proteínas de fase aguda, como a PCR, pelo fígado é um efeito protetor, pois elas auxiliam na opsonização e ativação do complemento." },
                    { text: "Aumento da produção de leucócitos na medula óssea.", rationale: "A estimulação da medula óssea para produzir mais leucócitos é um mecanismo de defesa fundamental para combater a agressão." },
                    { text: "Aumento da resistência à insulina em múltiplos tecidos.", rationale: "Correto. O aumento da resistência à insulina é classificado como um efeito patológico sistêmico do TNF-alfa em níveis elevados, não um efeito protetor.", isCorrect: true }
                ],
                hint: "Diferencie os efeitos que ajudam o corpo a combater uma infecção (protetores) daqueles que causam disfunção orgânica (patológicos)."
            },
            {
                question: "Durante uma resposta inflamatória sistêmica, observa-se uma queda nos níveis de albumina sérica. Qual é a principal razão para essa hipoalbuminemia, conforme descrito no texto?",
                options: [
                    { text: "Aumento da perda de albumina pelos rins devido à lesão glomerular.", rationale: "Embora a lesão renal possa ocorrer na sepse e levar à proteinúria, o texto aponta para mecanismos mais centrais relacionados à produção hepática e à permeabilidade vascular." },
                    { text: "Consumo de albumina por macrófagos ativados no local da inflamação.", rationale: "Macrófagos fagocitam patógenos e debris celulares, mas não consomem albumina como uma função primária." },
                    { text: "Redirecionamento da síntese hepática e aumento da permeabilidade vascular.", rationale: "Correto. O texto explica que citocinas inflamatórias (como a IL-6) fazem o fígado priorizar a produção de proteínas de fase aguda (como a PCR) em detrimento da albumina, e a inflamação aumenta a permeabilidade dos vasos, permitindo o extravasamento da albumina para o espaço intersticial.", isCorrect: true },
                    { text: "Destruição da albumina por proteases liberadas por neutrófilos.", rationale: "Neutrófilos liberam enzimas que podem degradar tecidos, mas a principal causa da queda sistêmica da albumina, conforme o texto, está ligada à síntese hepática e ao extravasamento vascular." }
                ],
                hint: "O texto descreve dois mecanismos principais que levam à queda da albumina. Um está relacionado à sua produção e o outro à sua distribuição no corpo."
            },
            {
                question: "Qual é a principal diferença entre inflamação aguda e crônica, de acordo com o texto?",
                options: [
                    { text: "A inflamação aguda envolve neutrófilos, enquanto a crônica envolve apenas macrófagos.", rationale: "A inflamação crônica envolve macrófagos, mas também linfócitos T e pode ter recrutamento de neutrófilos (via Th17), portanto esta afirmação não é totalmente precisa." },
                    { text: "A inflamação aguda sempre resolve a causa, enquanto a crônica nunca o faz.", rationale: "A inflamação crônica ocorre porque o fator causal não foi removido, mas a inflamação aguda também pode não conseguir eliminar o agente agressor, progredindo para a cronicidade." },
                    { text: "Na inflamação aguda, a destruição tecidual e o reparo são eventos sequenciais, enquanto na crônica, ocorrem simultaneamente.", rationale: "Correto. O texto destaca que uma característica da inflamação crônica é a ocorrência simultânea de inflamação ativa, destruição tecidual e tentativas de reparo (como a fibrose).", isCorrect: true },
                    { text: "A inflamação aguda é sempre sintomática e localizada, enquanto a crônica é sempre sistêmica e assintomática.", rationale: "A inflamação crônica é descrita como muitas vezes assintomática, mas pode ser localizada (granuloma) ou difusa. A inflamação aguda pode ter efeitos sistêmicos importantes (febre, leucocitose)." }
                ],
                hint: "Pense na temporalidade e na coexistência dos processos de lesão e cura em cada tipo de inflamação."
            },
            {
                question: "No processo de resolução da inflamação, qual evento é crucial para a transição de uma resposta pró-inflamatória para uma anti-inflamatória?",
                options: [
                    { text: "A ativação de linfócitos Th1 para a formação de granulomas.", rationale: "A ativação de Th1 e a formação de granulomas são características de uma resposta inflamatória crônica, não da sua resolução." },
                    { text: "A liberação contínua de TNF-alfa para manter a quimiotaxia.", rationale: "A liberação contínua de TNF-alfa perpetua a inflamação, em vez de resolvê-la." },
                    { text: "A apoptose de neutrófilos e a diferenciação de macrófagos em M2.", rationale: "Correto. O texto menciona que a resolução do processo inflamatório envolve a apoptose dos neutrófilos que se tornaram ociosos e a diferenciação de macrófagos para o perfil M2, que produz citocinas anti-inflamatórias como TGF-beta e IL-10.", isCorrect: true },
                    { text: "A queda da albumina sérica para reduzir a pressão oncótica.", rationale: "A queda da albumina é uma consequência da inflamação sistêmica, não um mecanismo ativo de sua resolução." }
                ],
                hint: "Considere o destino das células inflamatórias após cumprirem sua função e como a resposta celular muda para promover o reparo."
            },
            {
                question: "Qual citocina, produzida por macrófagos e células endoteliais, tem como um de seus principais alvos o fígado, estimulando-o a sintetizar proteínas de fase aguda e também promovendo a proliferação de células B?",
                options: [
                    { text: "TNF-alfa", rationale: "Embora o TNF-alfa atue no fígado, sua principal função descrita é o catabolismo e a indução de proteínas de fase aguda. A promoção da proliferação de células B é mais específica de outra citocina." },
                    { text: "IL-1", rationale: "A IL-1 também estimula o fígado a produzir proteínas de fase aguda, mas o texto destaca a IL-6 como promotora da proliferação de células B." },
                    { text: "Quimiocinas", rationale: "As quimiocinas são primariamente responsáveis pela quimiotaxia, ou seja, pelo recrutamento de leucócitos para os locais de inflamação, e não pela síntese hepática ou proliferação de células B." },
                    { text: "IL-6", rationale: "Correto. O texto especifica que a IL-6, produzida por macrófagos e outras células, atua no fígado para a síntese de proteínas de fase aguda e estimula as células B à proliferação de células produtoras de anticorpos.", isCorrect: true }
                ],
                hint: "Procure a citocina que tem uma dupla função descrita no texto: atuar no fígado e em células do sistema imune adaptativo."
            },
            {
                question: "Um paciente na emergência apresenta frequência respiratória de 25 ipm, pressão arterial sistólica de 95 mmHg e confusão mental aguda. Ele tem uma ferida infectada na perna. Qual é a ação mais apropriada com base nesses achados, segundo os conceitos de qSOFA?",
                options: [
                    { text: "Monitorar o paciente, pois ele apresenta apenas um critério do escore qSOFA.", rationale: "O paciente apresenta três critérios do qSOFA: frequência respiratória ≥ 22 ipm, pressão arterial sistólica ≤ 100 mmHg e alteração do nível de consciência." },
                    { text: "Iniciar imediatamente o tratamento para CARS (Síndrome da Resposta Anti-inflamatória Compensatória).", rationale: "O quadro clínico inicial é de uma resposta inflamatória aguda. A CARS é uma fase posterior, de imunossupressão." },
                    { text: "Considerar o diagnóstico de SIRS de causa não infecciosa e investigar pancreatite.", rationale: "Embora os sinais possam indicar SIRS, a presença de uma infecção suspeita (ferida infectada) torna a sepse a principal hipótese." },
                    { text: "Suspeitar de sepse devido ao qSOFA positivo (≥ 2) e proceder com uma investigação mais aprofundada da disfunção orgânica (escore SOFA).", rationale: "Correto. O paciente apresenta os três critérios do qSOFA, resultando em um escore de 3. Um qSOFA ≥ 2 em um paciente com infecção suspeita indica alto risco de desfechos desfavoráveis e a necessidade de uma avaliação completa da disfunção orgânica com o escore SOFA completo e intervenção agressiva.", isCorrect: true }
                ],
                hint: "Avalie os sinais vitais e o estado neurológico do paciente em relação aos três critérios do escore qSOFA."
            },
            {
                question: "Qual das seguintes afirmações melhor define a relação entre SIRS e Sepse, de acordo com o documento?",
                options: [
                    { text: "SIRS é sempre causada por uma infecção, e Sepse é a sua forma mais grave.", rationale: "Esta afirmação está incorreta. O texto esclarece que a SIRS pode ser causada por condições não infecciosas, como traumas e queimaduras." },
                    { text: "Sepse é a resposta inflamatória a uma infecção, enquanto SIRS é a resposta anti-inflamatória que a segue.", rationale: "A SIRS é a resposta inflamatória sistêmica. A resposta anti-inflamatória que pode se seguir é a CARS, não a SIRS." },
                    { text: "Todo paciente com sepse apresenta SIRS, mas nem todo paciente com SIRS tem sepse.", rationale: "Correto. A sepse é a SIRS desencadeada por uma infecção que leva à disfunção orgânica. No entanto, a SIRS pode ocorrer devido a causas não infecciosas (trauma, pancreatite, etc.), casos em que não há sepse. Portanto, a sepse é um subconjunto da SIRS de origem infecciosa.", isCorrect: true },
                    { text: "Sepse e SIRS são termos intercambiáveis para descrever uma infecção generalizada.", rationale: "Os termos não são intercambiáveis. Além disso, a sepse não é a infecção que se generaliza, mas sim a resposta desregulada do hospedeiro a uma infecção localizada." }
                ],
                hint: "Pense na relação de causa e efeito e nos critérios de diagnóstico. A sepse sempre tem uma causa infecciosa?"
            },
            {
                question: "Qual dos seguintes parâmetros NÃO faz parte da avaliação do escore SOFA (Sequential Organ Failure Assessment)?",
                options: [
                    { text: "Relação PaO2/FiO2 para avaliação do sistema respiratório.", rationale: "A relação entre a pressão arterial de oxigênio e a fração inspirada de oxigênio (PaO2/FiO2) é o parâmetro utilizado para avaliar a função respiratória no escore SOFA." },
                    { text: "Níveis de proteína C reativa (PCR) para avaliação hepática.", rationale: "Correto. Para a avaliação da função hepática, o escore SOFA utiliza os níveis de bilirrubina sérica. A PCR é um marcador de inflamação e uma proteína de fase aguda, mas não um critério direto do escore SOFA para disfunção hepática.", isCorrect: true },
                    { text: "Contagem de plaquetas para avaliação da coagulação.", rationale: "A contagem de plaquetas é o parâmetro utilizado para avaliar a disfunção do sistema de coagulação no escore SOFA." },
                    { text: "Escala de Coma de Glasgow para avaliação do sistema neurológico.", rationale: "A Escala de Coma de Glasgow é utilizada para avaliar o nível de consciência e a função do sistema nervoso central no escore SOFA." }
                ],
                hint: "Revise a lista dos seis sistemas orgânicos e seus respectivos marcadores avaliados pelo escore SOFA."
            },
            {
                question: "Um paciente que sobrevive a um episódio de choque séptico desenvolve infecções hospitalares recorrentes por patógenos oportunistas semanas após a alta da UTI. Com base no modelo bifásico da sepse (SIRS/CARS), qual é a explicação mais provável para essa vulnerabilidade?",
                options: [
                    { text: "Uma resposta SIRS persistente, com níveis cronicamente elevados de TNF-alfa.", rationale: "Uma resposta SIRS persistente levaria a mais dano tecidual por hiperinflamação, não necessariamente a uma vulnerabilidade a infecções oportunistas, que é característica da imunossupressão." },
                    { text: "A falha do fígado em produzir proteínas de fase aguda durante a recuperação.", rationale: "A produção de proteínas de fase aguda é parte da resposta inicial. A vulnerabilidade tardia está mais ligada a uma desregulação celular do sistema imune." },
                    { text: "Imunossupressão profunda e prolongada dominada pela resposta CARS.", rationale: "Correto. O texto e o gráfico explicam que, após a fase hiper-inflamatória (SIRS), o paciente pode entrar em um estado de imunossupressão (CARS), mediado por citocinas como IL-10. Essa 'paralisia imune' o torna vulnerável a infecções secundárias, que são uma causa comum de morte tardia.", isCorrect: true },
                    { text: "A formação de granulomas que aprisionam os leucócitos, impedindo sua circulação.", rationale: "A formação de granulomas é uma resposta a infecções crônicas específicas e não explica a imunossupressão sistêmica generalizada observada após a sepse." }
                ],
                hint: "Observe o gráfico SIRS/CARS. O que acontece com a resposta imune na fase tardia, após o pico inflamatório inicial?"
            },
            {
                question: "Com base nos gráficos que ilustram o curso de uma infecção, qual é a principal diferença entre uma resposta imune eficaz e uma resposta patológica que leva à doença crônica?",
                options: [
                    { text: "A resposta eficaz gera um dano colateral muito maior para eliminar o patógeno rapidamente.", rationale: "Pelo contrário, o primeiro gráfico mostra que a resposta eficaz mantém o dano colateral dentro de um limite aceitável." },
                    { text: "A resposta patológica não consegue recrutar leucócitos para o sítio da infecção.", rationale: "Ambos os cenários mostram o recrutamento de leucócitos. O problema na resposta patológica não é a falta de recrutamento, mas a ineficácia em eliminar o patógeno e o dano contínuo." },
                    { text: "A resposta eficaz elimina completamente o patógeno, enquanto a patológica resulta em uma carga de patógeno persistente e dano colateral excessivo.", rationale: "Correto. O primeiro gráfico mostra a carga do patógeno chegando a zero com dano colateral controlado. O segundo gráfico mostra a carga do patógeno se estabilizando (infecção persistente), com o dano colateral ultrapassando o limite aceitável, o que caracteriza a doença crônica.", isCorrect: true },
                    { text: "Na resposta eficaz, o reconhecimento do patógeno é mais lento, permitindo uma resposta mais controlada.", rationale: "Ambos os gráficos começam com o reconhecimento do patógeno. A velocidade do reconhecimento não é a diferença destacada, mas sim o resultado final em termos de eliminação do patógeno e controle do dano." }
                ],
                hint: "Compare o destino da 'Carga do patógeno' (linha azul) e do 'Dano colateral' (linha vermelha) nos dois cenários gráficos."
            }
        ];

        // --- LÓGICA DO QUIZ ---

        // Elementos do DOM
        const quizContentEl = document.getElementById('quiz-content');
        const resultsContainerEl = document.getElementById('results-container');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const feedbackContainerEl = document.getElementById('feedback-container');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        
        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        
        const hintContainerEl = document.getElementById('hint-container');
        const hintTextEl = document.getElementById('hint-text');

        // Estado do Quiz
        let currentQuestionIndex = 0;
        let score = 0;
        
        // Função para iniciar ou reiniciar o quiz
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            resultsContainerEl.classList.add('hidden');
            quizContentEl.classList.remove('hidden');
            nextBtn.textContent = "Próxima Questão";
            totalQuestionsEl.textContent = quizData.length;
            showQuestion();
        }

        // Função para mostrar a questão atual
        function showQuestion() {
            resetState();
            const currentQuestion = quizData[currentQuestionIndex];
            
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = currentQuestion.question;

            currentQuestion.options.forEach((option) => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.classList.add('option-btn');
                button.addEventListener('click', () => selectAnswer(option, button));
                optionsContainerEl.appendChild(button);
            });

            if (currentQuestion.hint) {
                hintTextEl.textContent = currentQuestion.hint;
                hintContainerEl.classList.remove('hidden');
            }
        }

        // Função para resetar o estado entre as questões
        function resetState() {
            nextBtn.classList.add('hidden');
            feedbackContainerEl.classList.add('hidden');
            hintContainerEl.classList.add('hidden');
            feedbackContainerEl.textContent = '';
            feedbackContainerEl.className = 'feedback-container'; // Reseta as classes de cor
            while (optionsContainerEl.firstChild) {
                optionsContainerEl.removeChild(optionsContainerEl.firstChild);
            }
        }

        // Função para processar a seleção da resposta
        function selectAnswer(option, selectedButton) {
            const correct = option.isCorrect === true;
            
            if (correct) {
                score++;
                selectedButton.classList.add('correct');
                feedbackContainerEl.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
                feedbackContainerEl.classList.add('incorrect');
            }

            feedbackContainerEl.innerHTML = `<strong>Justificativa:</strong> ${option.rationale}`;
            feedbackContainerEl.classList.remove('hidden');

            Array.from(optionsContainerEl.children).forEach(button => {
                const btnOption = quizData[currentQuestionIndex].options.find(opt => opt.text === button.textContent);
                if (btnOption.isCorrect === true) {
                    button.classList.add('correct');
                }
                button.disabled = true;
            });
            
            if (quizData.length > currentQuestionIndex + 1) {
                nextBtn.classList.remove('hidden');
            } else {
                nextBtn.textContent = "Ver Resultados";
                nextBtn.classList.remove('hidden');
            }
        }

        // Função para mostrar os resultados finais
        function showResults() {
             quizContentEl.classList.add('hidden');
             resultsContainerEl.classList.remove('hidden');
             
             const scorePercent = Math.round((score / quizData.length) * 100);
             const scoreTextEl = document.getElementById('score-text');
             const feedbackMessageEl = document.getElementById('feedback-message');
             
             scoreTextEl.textContent = `Você acertou ${score} de ${quizData.length} questões (${scorePercent}%).`;
             
             if(scorePercent === 100) {
                 feedbackMessageEl.textContent = "Excelente! Você domina o assunto. Parabéns!";
             } else if (scorePercent >= 70) {
                 feedbackMessageEl.textContent = "Ótimo desempenho! Continue estudando para aprofundar ainda mais.";
             } else if (scorePercent >= 50) {
                 feedbackMessageEl.textContent = "Bom trabalho. Reveja os pontos que errou para fortalecer seu conhecimento.";
             } else {
                 feedbackMessageEl.textContent = "Não desanime. Estudar a fisiopatologia é um desafio. Use este quiz para focar nos seus pontos fracos.";
             }
        }

        // Event Listeners para os botões de navegação
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                showQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', startQuiz);

        // Inicia o quiz quando a página carregar
        document.addEventListener('DOMContentLoaded', startQuiz);
    </script>

</body>
</html>
